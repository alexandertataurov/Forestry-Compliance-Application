import{j as T}from"./jsx-runtime-CDt2p4po.js";import{R as _,r as me}from"./index-GiUgBvb1.js";import{S as Wt}from"./index-BKGh1TIg.js";import{c as Re}from"./utils-CytzSlOG.js";import{L as Ht}from"./label-q215n4_B.js";import{I as $t}from"./input-lGAHk9zI.js";import{B as Kt}from"./button-DMXYZjU8.js";import"./index-BnncbVHi.js";import"./index-CROobee-.js";import"./index-BwobEAja.js";var ge=e=>e.type==="checkbox",ae=e=>e instanceof Date,P=e=>e==null;const yt=e=>typeof e=="object";var M=e=>!P(e)&&!Array.isArray(e)&&yt(e)&&!ae(e),mt=e=>M(e)&&e.target?ge(e.target)?e.target.checked:e.target.value:e,zt=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,gt=(e,s)=>e.has(zt(s)),Gt=e=>{const s=e.constructor&&e.constructor.prototype;return M(s)&&s.hasOwnProperty("isPrototypeOf")},pe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function R(e){let s;const t=Array.isArray(e),a=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)s=new Date(e);else if(!(pe&&(e instanceof Blob||a))&&(t||M(e)))if(s=t?[]:Object.create(Object.getPrototypeOf(e)),!t&&!Gt(e))s=e;else for(const n in e)e.hasOwnProperty(n)&&(s[n]=R(e[n]));else return e;return s}var we=e=>/^\w*$/.test(e),L=e=>e===void 0,Te=e=>Array.isArray(e)?e.filter(Boolean):[],Ne=e=>Te(e.replace(/["|']|\]/g,"").split(/\.|\[/)),y=(e,s,t)=>{if(!s||!M(e))return t;const a=(we(s)?[s]:Ne(s)).reduce((n,o)=>P(n)?n:n[o],e);return L(a)||a===e?L(e[s])?t:e[s]:a},H=e=>typeof e=="boolean",D=(e,s,t)=>{let a=-1;const n=we(s)?[s]:Ne(s),o=n.length,f=o-1;for(;++a<o;){const c=n[a];let E=t;if(a!==f){const k=e[c];E=M(k)||Array.isArray(k)?k:isNaN(+n[a+1])?{}:[]}if(c==="__proto__"||c==="constructor"||c==="prototype")return;e[c]=E,e=e[c]}};const Fe={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},G={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Z={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Ue=_.createContext(null);Ue.displayName="HookFormContext";const De=()=>_.useContext(Ue),Jt=e=>{const{children:s,...t}=e;return _.createElement(Ue.Provider,{value:t},s)};var ht=(e,s,t,a=!0)=>{const n={defaultValues:s._defaultValues};for(const o in e)Object.defineProperty(n,o,{get:()=>{const f=o;return s._proxyFormState[f]!==G.all&&(s._proxyFormState[f]=!a||G.all),t&&(t[f]=!0),e[f]}});return n};const Be=typeof window<"u"?_.useLayoutEffect:_.useEffect;function vt(e){const s=De(),{control:t=s.control,disabled:a,name:n,exact:o}=e||{},[f,c]=_.useState(t._formState),E=_.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Be(()=>t._subscribe({name:n,formState:E.current,exact:o,callback:k=>{!a&&c({...t._formState,...k})}}),[n,a,o]),_.useEffect(()=>{E.current.isValid&&t._setValid(!0)},[t]),_.useMemo(()=>ht(f,t,E.current,!1),[f,t])}var X=e=>typeof e=="string",bt=(e,s,t,a,n)=>X(e)?(a&&s.watch.add(e),y(t,e,n)):Array.isArray(e)?e.map(o=>(a&&s.watch.add(o),y(t,o))):(a&&(s.watchAll=!0),t),Oe=e=>P(e)||!yt(e);function ee(e,s,t=new WeakSet){if(Oe(e)||Oe(s))return e===s;if(ae(e)&&ae(s))return e.getTime()===s.getTime();const a=Object.keys(e),n=Object.keys(s);if(a.length!==n.length)return!1;if(t.has(e)||t.has(s))return!0;t.add(e),t.add(s);for(const o of a){const f=e[o];if(!n.includes(o))return!1;if(o!=="ref"){const c=s[o];if(ae(f)&&ae(c)||M(f)&&M(c)||Array.isArray(f)&&Array.isArray(c)?!ee(f,c,t):f!==c)return!1}}return!0}function Yt(e){const s=De(),{control:t=s.control,name:a,defaultValue:n,disabled:o,exact:f,compute:c}=e||{},E=_.useRef(n),k=_.useRef(c),b=_.useRef(void 0);k.current=c;const x=_.useMemo(()=>t._getWatch(a,E.current),[t,a]),[v,K]=_.useState(k.current?k.current(x):x);return Be(()=>t._subscribe({name:a,formState:{values:!0},exact:f,callback:W=>{if(!o){const S=bt(a,t._names,W.values||t._formValues,!1,E.current);if(k.current){const N=k.current(S);ee(N,b.current)||(K(N),b.current=N)}else K(S)}}}),[t,o,a,f]),_.useEffect(()=>t._removeUnmounted()),v}function Qt(e){const s=De(),{name:t,disabled:a,control:n=s.control,shouldUnregister:o,defaultValue:f}=e,c=gt(n._names.array,t),E=_.useMemo(()=>y(n._formValues,t,y(n._defaultValues,t,f)),[n,t,f]),k=Yt({control:n,name:t,defaultValue:E,exact:!0}),b=vt({control:n,name:t,exact:!0}),x=_.useRef(e),v=_.useRef(n.register(t,{...e.rules,value:k,...H(e.disabled)?{disabled:e.disabled}:{}}));x.current=e;const K=_.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!y(b.errors,t)},isDirty:{enumerable:!0,get:()=>!!y(b.dirtyFields,t)},isTouched:{enumerable:!0,get:()=>!!y(b.touchedFields,t)},isValidating:{enumerable:!0,get:()=>!!y(b.validatingFields,t)},error:{enumerable:!0,get:()=>y(b.errors,t)}}),[b,t]),W=_.useCallback(h=>v.current.onChange({target:{value:mt(h),name:t},type:Fe.CHANGE}),[t]),S=_.useCallback(()=>v.current.onBlur({target:{value:y(n._formValues,t),name:t},type:Fe.BLUR}),[t,n._formValues]),N=_.useCallback(h=>{const U=y(n._fields,t);U&&h&&(U._f.ref={focus:()=>h.focus&&h.focus(),select:()=>h.select&&h.select(),setCustomValidity:p=>h.setCustomValidity(p),reportValidity:()=>h.reportValidity()})},[n._fields,t]),ne=_.useMemo(()=>({name:t,value:k,...H(a)||b.disabled?{disabled:b.disabled||a}:{},onChange:W,onBlur:S,ref:N}),[t,a,b.disabled,W,S,N,k]);return _.useEffect(()=>{const h=n._options.shouldUnregister||o;n.register(t,{...x.current.rules,...H(x.current.disabled)?{disabled:x.current.disabled}:{}});const U=(p,C)=>{const te=y(n._fields,p);te&&te._f&&(te._f.mount=C)};if(U(t,!0),h){const p=R(y(n._options.defaultValues,t));D(n._defaultValues,t,p),L(y(n._formValues,t))&&D(n._formValues,t,p)}return!c&&n.register(t),()=>{(c?h&&!n._state.action:h)?n.unregister(t):U(t,!1)}},[t,n,c,o]),_.useEffect(()=>{n._setDisabledField({disabled:a,name:t})},[a,t,n]),_.useMemo(()=>({field:ne,formState:b,fieldState:K}),[ne,b,K])}const Xt=e=>e.render(Qt(e));var Zt=(e,s,t,a,n)=>s?{...t[e],types:{...t[e]&&t[e].types?t[e].types:{},[a]:n||!0}}:{},fe=e=>Array.isArray(e)?e:[e],Ze=()=>{let e=[];return{get observers(){return e},next:n=>{for(const o of e)o.next&&o.next(n)},subscribe:n=>(e.push(n),{unsubscribe:()=>{e=e.filter(o=>o!==n)}}),unsubscribe:()=>{e=[]}}},q=e=>M(e)&&!Object.keys(e).length,Pe=e=>e.type==="file",J=e=>typeof e=="function",Ve=e=>{if(!pe)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},_t=e=>e.type==="select-multiple",je=e=>e.type==="radio",er=e=>je(e)||ge(e),Me=e=>Ve(e)&&e.isConnected;function tr(e,s){const t=s.slice(0,-1).length;let a=0;for(;a<t;)e=L(e)?a++:e[s[a++]];return e}function rr(e){for(const s in e)if(e.hasOwnProperty(s)&&!L(e[s]))return!1;return!0}function O(e,s){const t=Array.isArray(s)?s:we(s)?[s]:Ne(s),a=t.length===1?e:tr(e,t),n=t.length-1,o=t[n];return a&&delete a[o],n!==0&&(M(a)&&q(a)||Array.isArray(a)&&rr(a))&&O(e,t.slice(0,-1)),e}var Ft=e=>{for(const s in e)if(J(e[s]))return!0;return!1};function xe(e,s={}){const t=Array.isArray(e);if(M(e)||t)for(const a in e)Array.isArray(e[a])||M(e[a])&&!Ft(e[a])?(s[a]=Array.isArray(e[a])?[]:{},xe(e[a],s[a])):P(e[a])||(s[a]=!0);return s}function Vt(e,s,t){const a=Array.isArray(e);if(M(e)||a)for(const n in e)Array.isArray(e[n])||M(e[n])&&!Ft(e[n])?L(s)||Oe(t[n])?t[n]=Array.isArray(e[n])?xe(e[n],[]):{...xe(e[n])}:Vt(e[n],P(s)?{}:s[n],t[n]):t[n]=!ee(e[n],s[n]);return t}var de=(e,s)=>Vt(e,s,xe(s));const et={value:!1,isValid:!1},tt={value:!0,isValid:!0};var xt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(t=>t&&t.checked&&!t.disabled).map(t=>t.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!L(e[0].attributes.value)?L(e[0].value)||e[0].value===""?tt:{value:e[0].value,isValid:!0}:tt:et}return et},At=(e,{valueAsNumber:s,valueAsDate:t,setValueAs:a})=>L(e)?e:s?e===""?NaN:e&&+e:t&&X(e)?new Date(e):a?a(e):e;const rt={isValid:!1,value:null};var wt=e=>Array.isArray(e)?e.reduce((s,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:s,rt):rt;function st(e){const s=e.ref;return Pe(s)?s.files:je(s)?wt(e.refs).value:_t(s)?[...s.selectedOptions].map(({value:t})=>t):ge(s)?xt(e.refs).value:At(L(s.value)?e.ref.value:s.value,e)}var sr=(e,s,t,a)=>{const n={};for(const o of e){const f=y(s,o);f&&D(n,o,f._f)}return{criteriaMode:t,names:[...e],fields:n,shouldUseNativeValidation:a}},Ae=e=>e instanceof RegExp,ce=e=>L(e)?e:Ae(e)?e.source:M(e)?Ae(e.value)?e.value.source:e.value:e,it=e=>({isOnSubmit:!e||e===G.onSubmit,isOnBlur:e===G.onBlur,isOnChange:e===G.onChange,isOnAll:e===G.all,isOnTouch:e===G.onTouched});const at="AsyncFunction";var ir=e=>!!e&&!!e.validate&&!!(J(e.validate)&&e.validate.constructor.name===at||M(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===at)),ar=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),nt=(e,s,t)=>!t&&(s.watchAll||s.watch.has(e)||[...s.watch].some(a=>e.startsWith(a)&&/^\.\w+/.test(e.slice(a.length))));const ye=(e,s,t,a)=>{for(const n of t||Object.keys(e)){const o=y(e,n);if(o){const{_f:f,...c}=o;if(f){if(f.refs&&f.refs[0]&&s(f.refs[0],n)&&!a)return!0;if(f.ref&&s(f.ref,f.name)&&!a)return!0;if(ye(c,s))break}else if(M(c)&&ye(c,s))break}}};function ot(e,s,t){const a=y(e,t);if(a||we(t))return{error:a,name:t};const n=t.split(".");for(;n.length;){const o=n.join("."),f=y(s,o),c=y(e,o);if(f&&!Array.isArray(f)&&t!==o)return{name:t};if(c&&c.type)return{name:o,error:c};if(c&&c.root&&c.root.type)return{name:`${o}.root`,error:c.root};n.pop()}return{name:t}}var nr=(e,s,t,a)=>{t(e);const{name:n,...o}=e;return q(o)||Object.keys(o).length>=Object.keys(s).length||Object.keys(o).find(f=>s[f]===(!a||G.all))},or=(e,s,t)=>!e||!s||e===s||fe(e).some(a=>a&&(t?a===s:a.startsWith(s)||s.startsWith(a))),lr=(e,s,t,a,n)=>n.isOnAll?!1:!t&&n.isOnTouch?!(s||e):(t?a.isOnBlur:n.isOnBlur)?!e:(t?a.isOnChange:n.isOnChange)?e:!0,ur=(e,s)=>!Te(y(e,s)).length&&O(e,s),dr=(e,s,t)=>{const a=fe(y(e,t));return D(a,"root",s[t]),D(e,t,a),e},_e=e=>X(e);function lt(e,s,t="validate"){if(_e(e)||Array.isArray(e)&&e.every(_e)||H(e)&&!e)return{type:t,message:_e(e)?e:"",ref:s}}var le=e=>M(e)&&!Ae(e)?e:{value:e,message:""},ut=async(e,s,t,a,n,o)=>{const{ref:f,refs:c,required:E,maxLength:k,minLength:b,min:x,max:v,pattern:K,validate:W,name:S,valueAsNumber:N,mount:ne}=e._f,h=y(t,S);if(!ne||s.has(S))return{};const U=c?c[0]:f,p=F=>{n&&U.reportValidity&&(U.setCustomValidity(H(F)?"":F||""),U.reportValidity())},C={},te=je(f),re=ge(f),Se=te||re,z=(N||Pe(f))&&L(f.value)&&L(h)||Ve(f)&&f.value===""||h===""||Array.isArray(h)&&!h.length,ie=Zt.bind(null,S,a,C),Y=(F,A,I,B=Z.maxLength,j=Z.minLength)=>{const Q=F?A:I;C[S]={type:F?B:j,message:Q,ref:f,...ie(F?B:j,Q)}};if(o?!Array.isArray(h)||!h.length:E&&(!Se&&(z||P(h))||H(h)&&!h||re&&!xt(c).isValid||te&&!wt(c).isValid)){const{value:F,message:A}=_e(E)?{value:!!E,message:E}:le(E);if(F&&(C[S]={type:Z.required,message:A,ref:U,...ie(Z.required,A)},!a))return p(A),C}if(!z&&(!P(x)||!P(v))){let F,A;const I=le(v),B=le(x);if(!P(h)&&!isNaN(h)){const j=f.valueAsNumber||h&&+h;P(I.value)||(F=j>I.value),P(B.value)||(A=j<B.value)}else{const j=f.valueAsDate||new Date(h),Q=he=>new Date(new Date().toDateString()+" "+he),ue=f.type=="time",oe=f.type=="week";X(I.value)&&h&&(F=ue?Q(h)>Q(I.value):oe?h>I.value:j>new Date(I.value)),X(B.value)&&h&&(A=ue?Q(h)<Q(B.value):oe?h<B.value:j<new Date(B.value))}if((F||A)&&(Y(!!F,I.message,B.message,Z.max,Z.min),!a))return p(C[S].message),C}if((k||b)&&!z&&(X(h)||o&&Array.isArray(h))){const F=le(k),A=le(b),I=!P(F.value)&&h.length>+F.value,B=!P(A.value)&&h.length<+A.value;if((I||B)&&(Y(I,F.message,A.message),!a))return p(C[S].message),C}if(K&&!z&&X(h)){const{value:F,message:A}=le(K);if(Ae(F)&&!h.match(F)&&(C[S]={type:Z.pattern,message:A,ref:f,...ie(Z.pattern,A)},!a))return p(A),C}if(W){if(J(W)){const F=await W(h,t),A=lt(F,U);if(A&&(C[S]={...A,...ie(Z.validate,A.message)},!a))return p(A.message),C}else if(M(W)){let F={};for(const A in W){if(!q(F)&&!a)break;const I=lt(await W[A](h,t),U,A);I&&(F={...I,...ie(A,I.message)},p(I.message),a&&(C[S]=F))}if(!q(F)&&(C[S]={ref:U,...F},!a))return C}}return p(!0),C};const cr={mode:G.onSubmit,reValidateMode:G.onChange,shouldFocusError:!0};function fr(e={}){let s={...cr,...e},t={submitCount:0,isDirty:!1,isReady:!1,isLoading:J(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},a={},n=M(s.defaultValues)||M(s.values)?R(s.defaultValues||s.values)||{}:{},o=s.shouldUnregister?{}:R(n),f={action:!1,mount:!1,watch:!1},c={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},E,k=0;const b={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let x={...b};const v={array:Ze(),state:Ze()},K=s.criteriaMode===G.all,W=r=>i=>{clearTimeout(k),k=setTimeout(r,i)},S=async r=>{if(!s.disabled&&(b.isValid||x.isValid||r)){const i=s.resolver?q((await re()).errors):await z(a,!0);i!==t.isValid&&v.state.next({isValid:i})}},N=(r,i)=>{!s.disabled&&(b.isValidating||b.validatingFields||x.isValidating||x.validatingFields)&&((r||Array.from(c.mount)).forEach(l=>{l&&(i?D(t.validatingFields,l,i):O(t.validatingFields,l))}),v.state.next({validatingFields:t.validatingFields,isValidating:!q(t.validatingFields)}))},ne=(r,i=[],l,m,d=!0,u=!0)=>{if(m&&l&&!s.disabled){if(f.action=!0,u&&Array.isArray(y(a,r))){const g=l(y(a,r),m.argA,m.argB);d&&D(a,r,g)}if(u&&Array.isArray(y(t.errors,r))){const g=l(y(t.errors,r),m.argA,m.argB);d&&D(t.errors,r,g),ur(t.errors,r)}if((b.touchedFields||x.touchedFields)&&u&&Array.isArray(y(t.touchedFields,r))){const g=l(y(t.touchedFields,r),m.argA,m.argB);d&&D(t.touchedFields,r,g)}(b.dirtyFields||x.dirtyFields)&&(t.dirtyFields=de(n,o)),v.state.next({name:r,isDirty:Y(r,i),dirtyFields:t.dirtyFields,errors:t.errors,isValid:t.isValid})}else D(o,r,i)},h=(r,i)=>{D(t.errors,r,i),v.state.next({errors:t.errors})},U=r=>{t.errors=r,v.state.next({errors:t.errors,isValid:!1})},p=(r,i,l,m)=>{const d=y(a,r);if(d){const u=y(o,r,L(l)?y(n,r):l);L(u)||m&&m.defaultChecked||i?D(o,r,i?u:st(d._f)):I(r,u),f.mount&&S()}},C=(r,i,l,m,d)=>{let u=!1,g=!1;const V={name:r};if(!s.disabled){if(!l||m){(b.isDirty||x.isDirty)&&(g=t.isDirty,t.isDirty=V.isDirty=Y(),u=g!==V.isDirty);const w=ee(y(n,r),i);g=!!y(t.dirtyFields,r),w?O(t.dirtyFields,r):D(t.dirtyFields,r,!0),V.dirtyFields=t.dirtyFields,u=u||(b.dirtyFields||x.dirtyFields)&&g!==!w}if(l){const w=y(t.touchedFields,r);w||(D(t.touchedFields,r,l),V.touchedFields=t.touchedFields,u=u||(b.touchedFields||x.touchedFields)&&w!==l)}u&&d&&v.state.next(V)}return u?V:{}},te=(r,i,l,m)=>{const d=y(t.errors,r),u=(b.isValid||x.isValid)&&H(i)&&t.isValid!==i;if(s.delayError&&l?(E=W(()=>h(r,l)),E(s.delayError)):(clearTimeout(k),E=null,l?D(t.errors,r,l):O(t.errors,r)),(l?!ee(d,l):d)||!q(m)||u){const g={...m,...u&&H(i)?{isValid:i}:{},errors:t.errors,name:r};t={...t,...g},v.state.next(g)}},re=async r=>{N(r,!0);const i=await s.resolver(o,s.context,sr(r||c.mount,a,s.criteriaMode,s.shouldUseNativeValidation));return N(r),i},Se=async r=>{const{errors:i}=await re(r);if(r)for(const l of r){const m=y(i,l);m?D(t.errors,l,m):O(t.errors,l)}else t.errors=i;return i},z=async(r,i,l={valid:!0})=>{for(const m in r){const d=r[m];if(d){const{_f:u,...g}=d;if(u){const V=c.array.has(u.name),w=d._f&&ir(d._f);w&&b.validatingFields&&N([m],!0);const $=await ut(d,c.disabled,o,K,s.shouldUseNativeValidation&&!i,V);if(w&&b.validatingFields&&N([m]),$[u.name]&&(l.valid=!1,i))break;!i&&(y($,u.name)?V?dr(t.errors,$,u.name):D(t.errors,u.name,$[u.name]):O(t.errors,u.name))}!q(g)&&await z(g,i,l)}}return l.valid},ie=()=>{for(const r of c.unMount){const i=y(a,r);i&&(i._f.refs?i._f.refs.every(l=>!Me(l)):!Me(i._f.ref))&&Ee(r)}c.unMount=new Set},Y=(r,i)=>!s.disabled&&(r&&i&&D(o,r,i),!ee(he(),n)),F=(r,i,l)=>bt(r,c,{...f.mount?o:L(i)?n:X(r)?{[r]:i}:i},l,i),A=r=>Te(y(f.mount?o:n,r,s.shouldUnregister?y(n,r,[]):[])),I=(r,i,l={})=>{const m=y(a,r);let d=i;if(m){const u=m._f;u&&(!u.disabled&&D(o,r,At(i,u)),d=Ve(u.ref)&&P(i)?"":i,_t(u.ref)?[...u.ref.options].forEach(g=>g.selected=d.includes(g.value)):u.refs?ge(u.ref)?u.refs.forEach(g=>{(!g.defaultChecked||!g.disabled)&&(Array.isArray(d)?g.checked=!!d.find(V=>V===g.value):g.checked=d===g.value||!!d)}):u.refs.forEach(g=>g.checked=g.value===d):Pe(u.ref)?u.ref.value="":(u.ref.value=d,u.ref.type||v.state.next({name:r,values:R(o)})))}(l.shouldDirty||l.shouldTouch)&&C(r,d,l.shouldTouch,l.shouldDirty,!0),l.shouldValidate&&oe(r)},B=(r,i,l)=>{for(const m in i){if(!i.hasOwnProperty(m))return;const d=i[m],u=r+"."+m,g=y(a,u);(c.array.has(r)||M(d)||g&&!g._f)&&!ae(d)?B(u,d,l):I(u,d,l)}},j=(r,i,l={})=>{const m=y(a,r),d=c.array.has(r),u=R(i);D(o,r,u),d?(v.array.next({name:r,values:R(o)}),(b.isDirty||b.dirtyFields||x.isDirty||x.dirtyFields)&&l.shouldDirty&&v.state.next({name:r,dirtyFields:de(n,o),isDirty:Y(r,u)})):m&&!m._f&&!P(u)?B(r,u,l):I(r,u,l),nt(r,c)&&v.state.next({...t,name:r}),v.state.next({name:f.mount?r:void 0,values:R(o)})},Q=async r=>{f.mount=!0;const i=r.target;let l=i.name,m=!0;const d=y(a,l),u=w=>{m=Number.isNaN(w)||ae(w)&&isNaN(w.getTime())||ee(w,y(o,l,w))},g=it(s.mode),V=it(s.reValidateMode);if(d){let w,$;const ve=i.type?st(d._f):mt(r),se=r.type===Fe.BLUR||r.type===Fe.FOCUS_OUT,Pt=!ar(d._f)&&!s.resolver&&!y(t.errors,l)&&!d._f.deps||lr(se,y(t.touchedFields,l),t.isSubmitted,V,g),Ie=nt(l,c,se);D(o,l,ve),se?(!i||!i.readOnly)&&(d._f.onBlur&&d._f.onBlur(r),E&&E(0)):d._f.onChange&&d._f.onChange(r);const Le=C(l,ve,se),jt=!q(Le)||Ie;if(!se&&v.state.next({name:l,type:r.type,values:R(o)}),Pt)return(b.isValid||x.isValid)&&(s.mode==="onBlur"?se&&S():se||S()),jt&&v.state.next({name:l,...Ie?{}:Le});if(!se&&Ie&&v.state.next({...t}),s.resolver){const{errors:Qe}=await re([l]);if(u(ve),m){const qt=ot(t.errors,a,l),Xe=ot(Qe,a,qt.name||l);w=Xe.error,l=Xe.name,$=q(Qe)}}else N([l],!0),w=(await ut(d,c.disabled,o,K,s.shouldUseNativeValidation))[l],N([l]),u(ve),m&&(w?$=!1:(b.isValid||x.isValid)&&($=await z(a,!0)));m&&(d._f.deps&&oe(d._f.deps),te(l,$,w,Le))}},ue=(r,i)=>{if(y(t.errors,i)&&r.focus)return r.focus(),1},oe=async(r,i={})=>{let l,m;const d=fe(r);if(s.resolver){const u=await Se(L(r)?r:d);l=q(u),m=r?!d.some(g=>y(u,g)):l}else r?(m=(await Promise.all(d.map(async u=>{const g=y(a,u);return await z(g&&g._f?{[u]:g}:g)}))).every(Boolean),!(!m&&!t.isValid)&&S()):m=l=await z(a);return v.state.next({...!X(r)||(b.isValid||x.isValid)&&l!==t.isValid?{}:{name:r},...s.resolver||!r?{isValid:l}:{},errors:t.errors}),i.shouldFocus&&!m&&ye(a,ue,r?d:c.mount),m},he=r=>{const i={...f.mount?o:n};return L(r)?i:X(r)?y(i,r):r.map(l=>y(i,l))},We=(r,i)=>({invalid:!!y((i||t).errors,r),isDirty:!!y((i||t).dirtyFields,r),error:y((i||t).errors,r),isValidating:!!y(t.validatingFields,r),isTouched:!!y((i||t).touchedFields,r)}),Ot=r=>{r&&fe(r).forEach(i=>O(t.errors,i)),v.state.next({errors:r?t.errors:{}})},He=(r,i,l)=>{const m=(y(a,r,{_f:{}})._f||{}).ref,d=y(t.errors,r)||{},{ref:u,message:g,type:V,...w}=d;D(t.errors,r,{...w,...i,ref:m}),v.state.next({name:r,errors:t.errors,isValid:!1}),l&&l.shouldFocus&&m&&m.focus&&m.focus()},Rt=(r,i)=>J(r)?v.state.subscribe({next:l=>"values"in l&&r(F(void 0,i),l)}):F(r,i,!0),$e=r=>v.state.subscribe({next:i=>{or(r.name,i.name,r.exact)&&nr(i,r.formState||b,Bt,r.reRenderRoot)&&r.callback({values:{...o},...t,...i,defaultValues:n})}}).unsubscribe,pt=r=>(f.mount=!0,x={...x,...r.formState},$e({...r,formState:x})),Ee=(r,i={})=>{for(const l of r?fe(r):c.mount)c.mount.delete(l),c.array.delete(l),i.keepValue||(O(a,l),O(o,l)),!i.keepError&&O(t.errors,l),!i.keepDirty&&O(t.dirtyFields,l),!i.keepTouched&&O(t.touchedFields,l),!i.keepIsValidating&&O(t.validatingFields,l),!s.shouldUnregister&&!i.keepDefaultValue&&O(n,l);v.state.next({values:R(o)}),v.state.next({...t,...i.keepDirty?{isDirty:Y()}:{}}),!i.keepIsValid&&S()},Ke=({disabled:r,name:i})=>{(H(r)&&f.mount||r||c.disabled.has(i))&&(r?c.disabled.add(i):c.disabled.delete(i))},ke=(r,i={})=>{let l=y(a,r);const m=H(i.disabled)||H(s.disabled);return D(a,r,{...l||{},_f:{...l&&l._f?l._f:{ref:{name:r}},name:r,mount:!0,...i}}),c.mount.add(r),l?Ke({disabled:H(i.disabled)?i.disabled:s.disabled,name:r}):p(r,!0,i.value),{...m?{disabled:i.disabled||s.disabled}:{},...s.progressive?{required:!!i.required,min:ce(i.min),max:ce(i.max),minLength:ce(i.minLength),maxLength:ce(i.maxLength),pattern:ce(i.pattern)}:{},name:r,onChange:Q,onBlur:Q,ref:d=>{if(d){ke(r,i),l=y(a,r);const u=L(d.value)&&d.querySelectorAll&&d.querySelectorAll("input,select,textarea")[0]||d,g=er(u),V=l._f.refs||[];if(g?V.find(w=>w===u):u===l._f.ref)return;D(a,r,{_f:{...l._f,...g?{refs:[...V.filter(Me),u,...Array.isArray(y(n,r))?[{}]:[]],ref:{type:u.type,name:r}}:{ref:u}}}),p(r,!1,void 0,u)}else l=y(a,r,{}),l._f&&(l._f.mount=!1),(s.shouldUnregister||i.shouldUnregister)&&!(gt(c.array,r)&&f.action)&&c.unMount.add(r)}}},Ce=()=>s.shouldFocusError&&ye(a,ue,c.mount),Tt=r=>{H(r)&&(v.state.next({disabled:r}),ye(a,(i,l)=>{const m=y(a,l);m&&(i.disabled=m._f.disabled||r,Array.isArray(m._f.refs)&&m._f.refs.forEach(d=>{d.disabled=m._f.disabled||r}))},0,!1))},ze=(r,i)=>async l=>{let m;l&&(l.preventDefault&&l.preventDefault(),l.persist&&l.persist());let d=R(o);if(v.state.next({isSubmitting:!0}),s.resolver){const{errors:u,values:g}=await re();t.errors=u,d=R(g)}else await z(a);if(c.disabled.size)for(const u of c.disabled)O(d,u);if(O(t.errors,"root"),q(t.errors)){v.state.next({errors:{}});try{await r(d,l)}catch(u){m=u}}else i&&await i({...t.errors},l),Ce(),setTimeout(Ce);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:q(t.errors)&&!m,submitCount:t.submitCount+1,errors:t.errors}),m)throw m},Nt=(r,i={})=>{y(a,r)&&(L(i.defaultValue)?j(r,R(y(n,r))):(j(r,i.defaultValue),D(n,r,R(i.defaultValue))),i.keepTouched||O(t.touchedFields,r),i.keepDirty||(O(t.dirtyFields,r),t.isDirty=i.defaultValue?Y(r,R(y(n,r))):Y()),i.keepError||(O(t.errors,r),b.isValid&&S()),v.state.next({...t}))},Ge=(r,i={})=>{const l=r?R(r):n,m=R(l),d=q(r),u=d?n:m;if(i.keepDefaultValues||(n=l),!i.keepValues){if(i.keepDirtyValues){const g=new Set([...c.mount,...Object.keys(de(n,o))]);for(const V of Array.from(g))y(t.dirtyFields,V)?D(u,V,y(o,V)):j(V,y(u,V))}else{if(pe&&L(r))for(const g of c.mount){const V=y(a,g);if(V&&V._f){const w=Array.isArray(V._f.refs)?V._f.refs[0]:V._f.ref;if(Ve(w)){const $=w.closest("form");if($){$.reset();break}}}}if(i.keepFieldsRef)for(const g of c.mount)j(g,y(u,g));else a={}}o=s.shouldUnregister?i.keepDefaultValues?R(n):{}:R(u),v.array.next({values:{...u}}),v.state.next({values:{...u}})}c={mount:i.keepDirtyValues?c.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!b.isValid||!!i.keepIsValid||!!i.keepDirtyValues,f.watch=!!s.shouldUnregister,v.state.next({submitCount:i.keepSubmitCount?t.submitCount:0,isDirty:d?!1:i.keepDirty?t.isDirty:!!(i.keepDefaultValues&&!ee(r,n)),isSubmitted:i.keepIsSubmitted?t.isSubmitted:!1,dirtyFields:d?{}:i.keepDirtyValues?i.keepDefaultValues&&o?de(n,o):t.dirtyFields:i.keepDefaultValues&&r?de(n,r):i.keepDirty?t.dirtyFields:{},touchedFields:i.keepTouched?t.touchedFields:{},errors:i.keepErrors?t.errors:{},isSubmitSuccessful:i.keepIsSubmitSuccessful?t.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},Je=(r,i)=>Ge(J(r)?r(o):r,i),Ut=(r,i={})=>{const l=y(a,r),m=l&&l._f;if(m){const d=m.refs?m.refs[0]:m.ref;d.focus&&(d.focus(),i.shouldSelect&&J(d.select)&&d.select())}},Bt=r=>{t={...t,...r}},Ye={control:{register:ke,unregister:Ee,getFieldState:We,handleSubmit:ze,setError:He,_subscribe:$e,_runSchema:re,_focusError:Ce,_getWatch:F,_getDirty:Y,_setValid:S,_setFieldArray:ne,_setDisabledField:Ke,_setErrors:U,_getFieldArray:A,_reset:Ge,_resetDefaultValues:()=>J(s.defaultValues)&&s.defaultValues().then(r=>{Je(r,s.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:ie,_disableForm:Tt,_subjects:v,_proxyFormState:b,get _fields(){return a},get _formValues(){return o},get _state(){return f},set _state(r){f=r},get _defaultValues(){return n},get _names(){return c},set _names(r){c=r},get _formState(){return t},get _options(){return s},set _options(r){s={...s,...r}}},subscribe:pt,trigger:oe,register:ke,handleSubmit:ze,watch:Rt,setValue:j,getValues:he,reset:Je,resetField:Nt,clearErrors:Ot,unregister:Ee,setError:He,setFocus:Ut,getFieldState:We};return{...Ye,formControl:Ye}}function yr(e={}){const s=_.useRef(void 0),t=_.useRef(void 0),[a,n]=_.useState({isDirty:!1,isValidating:!1,isLoading:J(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:J(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:a},e.defaultValues&&!J(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:f,...c}=fr(e);s.current={...c,formState:a}}const o=s.current.control;return o._options=e,Be(()=>{const f=o._subscribe({formState:o._proxyFormState,callback:()=>n({...o._formState}),reRenderRoot:!0});return n(c=>({...c,isReady:!0})),o._formState.isReady=!0,f},[o]),_.useEffect(()=>o._disableForm(e.disabled),[o,e.disabled]),_.useEffect(()=>{e.mode&&(o._options.mode=e.mode),e.reValidateMode&&(o._options.reValidateMode=e.reValidateMode)},[o,e.mode,e.reValidateMode]),_.useEffect(()=>{e.errors&&(o._setErrors(e.errors),o._focusError())},[o,e.errors]),_.useEffect(()=>{e.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[o,e.shouldUnregister]),_.useEffect(()=>{if(o._proxyFormState.isDirty){const f=o._getDirty();f!==a.isDirty&&o._subjects.state.next({isDirty:f})}},[o,a.isDirty]),_.useEffect(()=>{e.values&&!ee(e.values,t.current)?(o._reset(e.values,{keepFieldsRef:!0,...o._options.resetOptions}),t.current=e.values,n(f=>({...f}))):o._resetDefaultValues()},[o,e.values]),_.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),s.current.formState=ht(a,o),s.current}const mr=Jt,Dt=me.createContext({}),St=({...e})=>T.jsx(Dt.Provider,{value:{name:e.name},children:T.jsx(Xt,{...e})}),qe=()=>{const e=me.useContext(Dt),s=me.useContext(Et),{getFieldState:t}=De(),a=vt({name:e.name}),n=t(e.name,a);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:o}=s;return{id:o,name:e.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...n}},Et=me.createContext({});function kt({className:e,...s}){const t=me.useId();return T.jsx(Et.Provider,{value:{id:t},children:T.jsx("div",{"data-slot":"form-item",className:Re("grid gap-2",e),...s})})}function Ct({className:e,...s}){const{error:t,formItemId:a}=qe();return T.jsx(Ht,{"data-slot":"form-label","data-error":!!t,className:Re("data-[error=true]:text-destructive",e),htmlFor:a,...s})}function It({...e}){const{error:s,formItemId:t,formDescriptionId:a,formMessageId:n}=qe();return T.jsx(Wt,{"data-slot":"form-control",id:t,"aria-describedby":s?`${a} ${n}`:`${a}`,"aria-invalid":!!s,...e})}function Lt({className:e,...s}){const{error:t,formMessageId:a}=qe(),n=t?String((t==null?void 0:t.message)??""):s.children;return n?T.jsx("p",{"data-slot":"form-message",id:a,className:Re("text-destructive text-sm",e),...s,children:n}):null}kt.__docgenInfo={description:"",methods:[],displayName:"FormItem"};Ct.__docgenInfo={description:"",methods:[],displayName:"FormLabel"};It.__docgenInfo={description:"",methods:[],displayName:"FormControl"};Lt.__docgenInfo={description:"",methods:[],displayName:"FormMessage"};St.__docgenInfo={description:"",methods:[],displayName:"FormField"};const Mt=()=>{const e=yr({defaultValues:{email:""}}),s=e.handleSubmit(t=>alert(JSON.stringify(t)));return T.jsx(mr,{...e,children:T.jsxs("form",{onSubmit:s,className:"space-y-4",children:[T.jsx(St,{control:e.control,name:"email",rules:{required:"Email is required"},render:()=>T.jsxs(kt,{children:[T.jsx(Ct,{children:"Email"}),T.jsx(It,{children:T.jsx($t,{placeholder:"you@example.com",type:"email"})}),T.jsx(Lt,{})]})}),T.jsx(Kt,{type:"submit",children:"Submit"})]})})},Sr={title:"UI/Form",component:Mt},be={render:()=>T.jsx(Mt,{})};var dt,ct,ft;be.parameters={...be.parameters,docs:{...(dt=be.parameters)==null?void 0:dt.docs,source:{originalSource:`{
  render: () => <DemoForm />
}`,...(ft=(ct=be.parameters)==null?void 0:ct.docs)==null?void 0:ft.source}}};const Er=["Basic"];export{be as Basic,Er as __namedExportsOrder,Sr as default};
